<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Server Settings - Nexus Management</title>
  <link rel="stylesheet" href="/styles.css">
  <link rel="stylesheet" href="/dashboard/dashboard.css">
  <link rel="stylesheet" href="/main/servers.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
</head>
<body>
  <!-- Navbar -->
  <nav class="navbar">
    <div class="logo">Nexus Management</div>
    <ul class="nav-links">
      <li><a href="/dashboard/user.html" id="dashboardLink"><i class="fa-solid fa-gauge-high"></i> Dashboard</a></li>
      <li><a href="/main/servers.html" id="serversLink"><i class="fa-solid fa-server"></i> Servers</a></li>
      <li><a href="/auth/logout" class="logout-link"><i class="fa-solid fa-right-from-bracket"></i> Logout</a></li>
    </ul>
  </nav>

  <!-- Hero Section -->
  <section class="servers-hero">
    <div class="hero-content fade-in">
      <h1><i class="fa-solid fa-cog"></i> Server Settings</h1>
      <p class="tagline" id="serverName">Loading...</p>
      <p class="subtext">Configure your server's ER:LC API integration</p>
    </div>
  </section>

  <!-- Main Content -->
  <section class="servers-content">
    <div class="servers-container">
      
      <!-- API Configuration Card -->
      <div class="dashboard-card reveal">
        <div class="card-header">
          <h3><i class="fa-solid fa-key"></i> ER:LC API Configuration</h3>
        </div>
        <div class="card-body">
          <p class="card-desc">
            Connect your server to the ER:LC API to enable live stats, player management, and automated features.
            <br><strong style="color: #ffc107;">⚠️ Important:</strong> You need your <strong>Server Key</strong> from your ER:LC private server settings (not your PRC account password).
          </p>

          <form id="apiForm">
            <div class="form-group">
              <label for="apiKey"><i class="fa-solid fa-key"></i> ER:LC Server Key</label>
              <input type="password" id="apiKey" placeholder="Enter your ER:LC Server Key" required>
              <small style="color: #999; display: block; margin-top: 0.5rem;">
                <strong>How to get your Server Key:</strong><br>
                1. Join your ER:LC private server<br>
                2. Open Settings (gear icon top right)<br>
                3. Find "ER:LC API" section<br>
                4. Copy the Server Key shown there
              </small>
            </div>

            <div class="api-status" id="apiStatus" style="display: none;">
              <i class="fa-solid fa-circle-check"></i>
              <span>API Connected Successfully</span>
            </div>

            <div class="button-group" style="display: flex; gap: 1rem; margin-top: 1.5rem;">
              <button type="submit" class="primary-btn" style="flex: 1;">
                <i class="fa-solid fa-check"></i> Save & Test Connection
              </button>
              <button type="button" class="secondary-btn" onclick="testConnection()" style="flex: 1;">
                <i class="fa-solid fa-signal"></i> Test Connection
              </button>
            </div>
          </form>
        </div>
      </div>

      <!-- Server Info Card -->
      <div class="dashboard-card reveal" id="serverInfoCard">
        <div class="card-header">
          <h3><i class="fa-solid fa-info-circle"></i> Server Information</h3>
        </div>
        <div class="card-body">
          <div class="server-details">
            <div class="detail-row">
              <span class="detail-label"><i class="fa-solid fa-server"></i> Server Name:</span>
              <span class="detail-value" id="infoServerName">-</span>
            </div>
            <div class="detail-row">
              <span class="detail-label"><i class="fa-solid fa-users"></i> Current Players:</span>
              <span class="detail-value" id="infoPlayers">-</span>
            </div>
            <div class="detail-row">
              <span class="detail-label"><i class="fa-solid fa-crown"></i> Owner:</span>
              <span class="detail-value" id="infoOwner">-</span>
            </div>
            <div class="detail-row">
              <span class="detail-label"><i class="fa-solid fa-map"></i> Map:</span>
              <span class="detail-value" id="infoMap">-</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Quick Actions -->
      <div class="dashboard-card reveal">
        <div class="card-header">
          <h3><i class="fa-solid fa-bolt"></i> Quick Actions</h3>
        </div>
        <div class="card-body">
          <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem;">
            <button class="feature-btn" onclick="goToServerDashboard()">
              <i class="fa-solid fa-gauge-high"></i> Server Dashboard
            </button>
            <button class="feature-btn" onclick="goToFeature('auto-announcements')">
              <i class="fa-solid fa-bullhorn"></i> Auto Announcements
            </button>
            <button class="feature-btn" onclick="goToFeature('live-stats')">
              <i class="fa-solid fa-chart-line"></i> Live Stats
            </button>
            <button class="feature-btn" onclick="goToFeature('logs')">
              <i class="fa-solid fa-database"></i> View Logs
            </button>
          </div>
        </div>
      </div>

      <!-- Danger Zone -->
      <div class="dashboard-card reveal" style="border-color: rgba(239, 68, 68, 0.5);">
        <div class="card-header" style="background: rgba(239, 68, 68, 0.1);">
          <h3><i class="fa-solid fa-triangle-exclamation"></i> Danger Zone</h3>
        </div>
        <div class="card-body">
          <p style="color: #999; margin-bottom: 1rem;">
            Delete this server permanently. This action cannot be undone.
          </p>
          <button class="danger-btn" onclick="confirmDeleteServer()" style="background: linear-gradient(135deg, #ef4444, #dc2626); border: none; padding: 0.8rem 1.5rem; border-radius: 8px; color: #fff; font-weight: 600; cursor: pointer;">
            <i class="fa-solid fa-trash"></i> Delete Server
          </button>
        </div>
      </div>

    </div>
  </section>

  <!-- Footer -->
  <footer>
    <p>&copy; 2026 Nexus Management | ER:LC Staff Management</p>
  </footer>

  <!-- Delete Confirmation Modal -->
  <div id="deleteModal" class="modal">
    <div class="modal-content">
      <div class="modal-header" style="background: rgba(239, 68, 68, 0.1); border-bottom: 1px solid rgba(239, 68, 68, 0.3);">
        <h2 style="color: #ef4444;"><i class="fa-solid fa-triangle-exclamation"></i> Delete Server</h2>
        <span class="close-btn" onclick="closeDeleteModal()">&times;</span>
      </div>
      <div class="modal-body">
        <p style="color: #fff; font-size: 1.1rem; margin-bottom: 1rem;">
          Are you absolutely sure you want to delete <strong id="deleteServerName">this server</strong>?
        </p>
        <p style="color: #999; margin-bottom: 1.5rem;">
          This will permanently delete:
        </p>
        <ul style="color: #ccc; margin-left: 1.5rem; margin-bottom: 1.5rem;">
          <li>Server configuration and settings</li>
          <li>API key connections</li>
          <li>All associated data</li>
        </ul>
        <p style="color: #ef4444; font-weight: 600;">
          This action cannot be undone!
        </p>
      </div>
      <div class="modal-footer">
        <button type="button" class="secondary-btn" onclick="closeDeleteModal()">Cancel</button>
        <button type="button" class="danger-btn" onclick="deleteServer()" style="background: linear-gradient(135deg, #ef4444, #dc2626); border: none; padding: 0.8rem 1.5rem; border-radius: 8px; color: #fff; font-weight: 600; cursor: pointer;">
          <i class="fa-solid fa-trash"></i> Yes, Delete Server
        </button>
      </div>
    </div>
  </div>

  <script src="server-settings.js"></script>
</body>
</html>